import{a as b,b as S}from"./chunk-MRKVS7HF.js";import{a as o}from"./chunk-EI7MMDWY.js";var P=[{aliases:["landing","koti","hem","home","about","meist\xE4"],handler:o(async()=>Response.redirect("https://why.vorte.app",302),"handler")},{aliases:["dashboard","ohjauspaneeli","instrument-panel","instrumentpanel","dash"],handler:o(async(t,e,n,a,s,r)=>{let i=s.DATA_SERVICE.getDashboardContent(n.AUTHORIZATION,t),{renderDashboard:u}=await import("./dashboard-SNREZU2Q.js");return u(t,e,n,"noindex",a,s,i)},"handler")},{aliases:["settings","my-settings","user","interface","asetukset","omat-asetukset","k\xE4ytt\xE4j\xE4","k\xE4ytt\xF6liittym\xE4","inst\xE4llningar","mina-inst\xE4llningar","anv\xE4ndare","gr\xE4ns-snittet"],handler:o(async(t,e,n,a,s,r)=>{let{renderSettings:i}=await import("./settings-7UGOOJVR.js");return i(t,e,n,"noindex",a,s,r)},"handler")},{aliases:["authentication","identification","sign-in","sign-up","sign-out","create-an-account","login","tunnistautuminen","kirjaudu-sis\xE4\xE4n","kirjaudu","kirjaudu-ulos","kirjautuminen","todentaminen","todennus","tunnistus","luo-k\xE4ytt\xE4j\xE4tili","rekister\xF6ityminen","rekister\xF6inti","skapa-konto","identifiering","autentisering","logga-in","logga-ut","inloggning"],handler:o(async(t,e,n,a,s,r)=>{let{renderAuthentication:i}=await import("./authentication-WPMOHKXV.js");return i(t,e,n,"noindex",a,s,r)},"handler")}],R=P;var h=new Map;for(let{aliases:t,handler:e}of R)for(let n of t)h.set(n,e);var m=o(t=>new Response({fi:"Sinut on estetty tunniksi, koska yritit k\xE4ytt\xE4\xE4 palvelua ilman aktiivista istuntoa. Voit pyyt\xE4\xE4 eston poistoa ottamalla yhteytt\xE4 s\xE4hk\xF6postitse osoitteeseen support@vorte.app.",sv:"Du har blivit blockerad i en timme f\xF6r att du f\xF6rs\xF6kte anv\xE4nda tj\xE4nsten utan en aktiv session. Du kan beg\xE4ra att blockeringen tas bort genom att kontakta support@vorte.app via e-post.",en:"You have been banned for one hour due to attempting to access the service without an active session. You may request removal of the ban by contacting support@vorte.app via email."}[t],{status:403,headers:{"Content-Type":"text/plain","Cache-Control":"public, max-age=31536000, immutable"}}),"BAN_RESPONSE"),g="https://vorte.app/403.html",E=!1;async function U(t){if(E)return;let e=new Request(g);await caches.default.match(e)||await caches.default.put(e,m(t)),E=!0}o(U,"ensureFallbackCached");var f=new Set(["fi","sv","en"]),I="en";async function T(t,e){if(e.lang)return e.lang;if(!t)return I;for(let n of t.split(",")){let a=n.trim().split(";",1)[0].split("-",1)[0];if(f.has(a))return a}return I}o(T,"negotiateLANGUAGE");var G={async fetch(t,e,n){try{let{hostname:a,pathname:s,searchParams:r}=new URL(t.url),i=s.split("/").filter(Boolean),[u,...C]=i,c=b(t.headers.get("cookie")||""),[l,k]=await Promise.all([f.has(u)?u:T(t.headers.get("Accept-Language"),c),t.headers.get("cf-connecting-ip")]),[O,v]=await Promise.all([U(l),e.BANNED_IPS_KV.get(k)]);if(v==="true"){let d=new Request(g,t);return await caches.default.match(d)??m(l)}if(u==="services"){if(await S(c.SESSION_VERIFIER,e)!==await e.SESSION_VERIFIER.get()){let A=new Request(g,t),D=await caches.default.match(A);return n.waitUntil(e.BANNED_IPS_KV.put(k,"true")),D??m(l)}let{initializeServices:d}=await import("./initializeServices-ZJ5BZ5VE.js");return await d(e,l,c,i,r,t.json())}let N=f.has(u)?C:i,p=decodeURIComponent(N.at(-1)||"dashboard"),y=r.has("demo")&&h.has(p)&&p||c.AUTHORIZATION!==void 0&&h.has(p)&&p||c.HAS_ACCOUNT==="true"&&"sign-in"||c.HAS_VISITED==="true"&&"create-an-account"||"landing",[w,_]=await Promise.all([h.get(y),e.CRYPTO_SERVICE.getNonce()]);return w?await w(l,_,c,y,e,r):Response.redirect("https://why.vorte.app/page-list",302)}catch(a){console.error(a);let s=a;return new Response(s,{status:a.status,headers:{"Cache-Control":"Public, Max-Age=31536000, Immutable"}})}}};export{G as default};
