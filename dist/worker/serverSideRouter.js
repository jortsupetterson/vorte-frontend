import{a as S,b as A}from"./chunk-MRKVS7HF.js";import{a as r}from"./chunk-EI7MMDWY.js";var D=[{aliases:["landing","koti","hem","home","about","meist\xE4"],handler:r(async()=>Response.redirect("https://why.vorte.app",302),"handler")},{aliases:["dashboard","ohjauspaneeli","instrument-panel","instrumentpanel","dash"],handler:r(async(t,e,n,a,i,s)=>{let{renderDashboard:o}=await import("./dashboard-PQKV2JBU.js");return o(t,e,n,"noindex",a,i,s)},"handler")},{aliases:["settings","my-settings","user","interface","asetukset","omat-asetukset","k\xE4ytt\xE4j\xE4","k\xE4ytt\xF6liittym\xE4","inst\xE4llningar","mina-inst\xE4llningar","anv\xE4ndare","gr\xE4ns-snittet"],handler:r(async(t,e,n,a,i,s)=>{let{renderSettings:o}=await import("./settings-BWVJHQDE.js");return o(t,e,n,"noindex",a,i,s)},"handler")},{aliases:["authentication","identification","sign-in","sign-up","sign-out","create-an-account","login","tunnistautuminen","kirjaudu-sis\xE4\xE4n","kirjaudu","kirjaudu-ulos","kirjautuminen","todentaminen","todennus","tunnistus","luo-k\xE4ytt\xE4j\xE4tili","rekister\xF6ityminen","rekister\xF6inti","skapa-konto","identifiering","autentisering","logga-in","logga-ut","inloggning"],handler:r(async(t,e,n,a,i,s)=>{let{renderAuthentication:o}=await import("./authentication-QAEL2EPO.js");return o(t,e,n,"noindex",a,i,s)},"handler")}],R=D;var h=new Map;for(let{aliases:t,handler:e}of R)for(let n of t)h.set(n,e);var m=r(t=>new Response({fi:"Sinut on estetty tunniksi, koska yritit k\xE4ytt\xE4\xE4 palvelua ilman aktiivista istuntoa. Voit pyyt\xE4\xE4 eston poistoa ottamalla yhteytt\xE4 s\xE4hk\xF6postitse osoitteeseen support@vorte.app.",sv:"Du har blivit blockerad i en timme f\xF6r att du f\xF6rs\xF6kte anv\xE4nda tj\xE4nsten utan en aktiv session. Du kan beg\xE4ra att blockeringen tas bort genom att kontakta support@vorte.app via e-post.",en:"You have been banned for one hour due to attempting to access the service without an active session. You may request removal of the ban by contacting support@vorte.app via email."}[t],{status:403,headers:{"Content-Type":"text/plain","Cache-Control":"public, max-age=31536000, immutable"}}),"BAN_RESPONSE"),g="https://vorte.app/403.html",E=!1;async function U(t){if(E)return;let e=new Request(g);await caches.default.match(e)||await caches.default.put(e,m(t)),E=!0}r(U,"ensureFallbackCached");var f=new Set(["fi","sv","en"]),v="en";async function j(t,e){if(e.lang)return e.lang;if(!t)return v;for(let n of t.split(",")){let a=n.trim().split(";",1)[0].split("-",1)[0];if(f.has(a))return a}return v}r(j,"negotiateLANGUAGE");var G={async fetch(t,e,n){try{let{hostname:a,pathname:i,searchParams:s}=new URL(t.url),o=i.split("/").filter(Boolean),[l,...C]=o,c=S(t.headers.get("cookie")||""),[u,k]=await Promise.all([f.has(l)?l:j(t.headers.get("Accept-Language"),c),t.headers.get("cf-connecting-ip")]),[L,I]=await Promise.all([U(u),e.BANNED_IPS_KV.get(k)]);if(I==="true"){let d=new Request(g,t);return await caches.default.match(d)??m(u)}if(l==="services"){if(await A(c.SESSION_VERIFIER,e)!==await e.SESSION_VERIFIER.get()){let b=new Request(g,t),P=await caches.default.match(b);return n.waitUntil(e.BANNED_IPS_KV.put(k,"true")),P??m(u)}let{initializeServices:d}=await import("./initializeServices-ZJ5BZ5VE.js");return await d(e,u,c,o,s,t.json())}let N=f.has(l)?C:o,p=decodeURIComponent(N.at(-1)||"dashboard"),y=s.has("demo")&&h.has(p)&&p||c.AUTHORIZATION!==void 0&&h.has(p)&&p||c.HAS_ACCOUNT==="true"&&"sign-in"||c.HAS_VISITED==="true"&&"create-an-account"||"landing",[w,_]=await Promise.all([h.get(y),e.CRYPTO_SERVICE.getNonce()]);return w?await w(u,_,c,y,e,s):Response.redirect("https://why.vorte.app/page-list",302)}catch(a){console.error(a);let i=a;return new Response(i,{status:a.status,headers:{"Cache-Control":"Public, Max-Age=31536000, Immutable"}})}}};export{G as default};
