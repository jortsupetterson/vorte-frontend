import{a as i,b as S,c as R}from"./chunk-3Z6VUVNK.js";var D=[{aliases:["landing","koti","hem","home","about","meist\xE4"],handler:i(async()=>Response.redirect("https://why.vorte.app",302),"handler")},{aliases:["dashboard","ohjauspaneeli","instrument-panel","instrumentpanel","dash"],handler:i(async(t,e,n,a,c,s)=>{let{renderDashboard:o}=await import("./dashboard-T2A3ALUT.js");return o(t,e,n,"noindex",a,c,s)},"handler")},{aliases:["settings","my-settings","user","interface","asetukset","omat-asetukset","k\xE4ytt\xE4j\xE4","k\xE4ytt\xF6liittym\xE4","inst\xE4llningar","mina-inst\xE4llningar","anv\xE4ndare","gr\xE4ns-snittet"],handler:i(async(t,e,n,a,c,s)=>{let{renderSettings:o}=await import("./settings-2EONBJCE.js");return o(t,e,n,"noindex",a,c,s)},"handler")},{aliases:["authentication","identification","sign-in","sign-up","sign-out","create-an-account","login","tunnistautuminen","kirjaudu-sis\xE4\xE4n","kirjaudu","kirjaudu-ulos","kirjautuminen","todentaminen","todennus","tunnistus","luo-k\xE4ytt\xE4j\xE4tili","rekister\xF6ityminen","rekister\xF6inti","skapa-konto","identifiering","autentisering","logga-in","logga-ut","inloggning"],handler:i(async(t,e,n,a,c,s)=>{let{renderAuthentication:o}=await import("./authentication-IS675DKS.js");return o(t,e,n,"noindex",a,c,s)},"handler")}],v=D;function f(){let t=new Uint8Array(16);crypto.getRandomValues(t);let e="";for(let n of t)e+=String.fromCharCode(n);return btoa(e)}i(f,"getNonce");var m=new Set(["fi","sv","en"]),E="en",d=new Map;for(let{aliases:t,handler:e}of v)for(let n of t)d.set(n,e);var g=i(t=>new Response({fi:"Sinut on estetty tunniksi, koska yritit k\xE4ytt\xE4\xE4 palvelua ilman aktiivista istuntoa. Voit pyyt\xE4\xE4 eston poistoa ottamalla yhteytt\xE4 s\xE4hk\xF6postitse osoitteeseen support@vorte.app.",sv:"Du har blivit blockerad i en timme f\xF6r att du f\xF6rs\xF6kte anv\xE4nda tj\xE4nsten utan en aktiv session. Du kan beg\xE4ra att blockeringen tas bort genom att kontakta support@vorte.app via e-post.",en:"You have been banned for one hour due to attempting to access the service without an active session. You may request removal of the ban by contacting support@vorte.app via email."}[t],{status:403,headers:{"Content-Type":"text/plain","Cache-Control":"public, max-age=31536000, immutable"}}),"BAN_RESPONSE"),k="https://vorte.app/403.html",N=!1;async function L(t){if(N)return;let e=new Request(k);await caches.default.match(e)||await caches.default.put(e,g(t)),N=!0}i(L,"ensureFallbackCached");async function O(t,e){if(e.lang)return e.lang;if(!t)return E;for(let n of t.split(",")){let a=n.trim().split(";",1)[0].split("-",1)[0];if(m.has(a))return a}return E}i(O,"negotiateLANGUAGE");var H={async fetch(t,e,n){try{let{hostname:a,pathname:c,searchParams:s}=new URL(t.url),o=c.split("/").filter(Boolean),[l,...I]=o,r=S(t.headers.get("cookie")||""),[u,y]=await Promise.all([m.has(l)?l:O(t.headers.get("Accept-Language"),r),t.headers.get("cf-connecting-ip")]),[T,C]=await Promise.all([L(u),e.BANNED_IPS_KV.get(y)]);if(C==="true"){let h=new Request(k,t);return await caches.default.match(h)??g(u)}if(l==="services"){if(await R(r.SESSION_VERIFIER,e)!==await e.SESSION_VERIFIER.get()){let A=new Request(k,t),_=await caches.default.match(A);return n.waitUntil(e.BANNED_IPS_KV.put(y,"true")),_??g(u)}let{initializeServices:h}=await import("./initializeServices-E4LAZPRB.js");return await h(t,e,n,u,r,o,s)}let U=m.has(l)?I:o,p=decodeURIComponent(U.at(-1)||""),w=s.has("demo")&&d.has(p)&&p||r.AUTHORIZATION!==void 0&&d.has(p)&&p||r.AUTHORIZATION!==void 0&&"dashboard"||r.HAS_ACCOUNT==="true"&&"sign-in"||r.HAS_VISITED==="true"&&"create-an-account"||"landing",b=d.get(w);return b?await b(u,f(),r,w,e,s):Response.redirect("https://why.vorte.app/page-list",302)}catch(a){return console.error(a),new Response(a)}}};export{H as default};
